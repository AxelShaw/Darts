TODO LIST - Darts App
======================

[ ] Faire le front correctement
[ ] AmÃ©liorer upload serveur et vitesse serveur
[ ] Tag avec les changement list


=====================
ðŸš€ Release Manager - Cahier des Charges
Objectif
Application web interne pour gÃ©rer les releases Git. Permet de sÃ©lectionner un repo, choisir une branche Ã  merger dans main/master, dÃ©finir un tag de version et crÃ©er une release avec description personnalisÃ©e.
Stack Technique
Backend : PHP (mÃªme structure que le projet Darts)
Frontend : JavaScript vanilla (classes ES6, mÃªme pattern que app.js)
API externe : GitHub API v3 (REST)
Authentification : Token GitHub personnel (PAT) stockÃ© dans config.php
Structure du projet
ReleaseManager/â”œâ”€â”€ index.php                    # Page principaleâ”œâ”€â”€ config.php                   # Configuration (token GitHub, liste repos)â”œâ”€â”€ api/â”‚   â”œâ”€â”€ init.php                 # Router APIâ”‚   â”œâ”€â”€ github.php               # Classe helper pour appels GitHub APIâ”‚   â””â”€â”€ endpoints/â”‚       â”œâ”€â”€ repos.php            # GET - Liste les repos configurÃ©sâ”‚       â”œâ”€â”€ branches.php         # GET - Branches d'un repo (param: repo)â”‚       â”œâ”€â”€ tags.php             # GET - Tags d'un repo + dernier tag (param: repo)â”‚       â”œâ”€â”€ merge.php            # POST - Merge branch dans main (params: repo, branch)â”‚       â””â”€â”€ release.php          # POST - CrÃ©er release (params: repo, tag, title, description)â””â”€â”€ pages/    â”œâ”€â”€ app.js                   # Classes App et Page (copier de Darts)    â””â”€â”€ manager/        â”œâ”€â”€ manager.js           # Page principale Release Manager        â””â”€â”€ manager.css          # Styles
Configuration (config.php)
<?phpdefine('APP_NAME', 'Release Manager');// Token GitHub avec permissions: repo, write:packagesdefine('GITHUB_TOKEN', 'ghp_xxxxxxxxxxxxxxxxxxxx');// Organisation ou utilisateur GitHubdefine('GITHUB_OWNER', 'ton-username-ou-org');// Liste des repos autorisÃ©s (pour Ã©viter d'exposer tous les repos)define('ALLOWED_REPOS', [    'API',    'Booking',     'Panel',    'AccountPage',    'Darts']);
Endpoints API
1. GET /api/init.php?e=repos
Retourne : Liste des repos configurÃ©s
{    "success": true,    "repos": ["API", "Booking", "Panel", "AccountPage", "Darts"]}
2. GET /api/init.php?e=branches&repo=API
Retourne : Branches du repo (exclure main/master)
{    "success": true,    "repo": "API",    "default_branch": "main",    "branches": [        {"name": "feature/new-auth", "last_commit": "2026-01-05", "author": "john"},        {"name": "fix/bug-123", "last_commit": "2026-01-06", "author": "jane"}    ]}
3. GET /api/init.php?e=tags&repo=API
Retourne : Tags existants + suggestions de nouveaux tags
{    "success": true,    "repo": "API",    "latest_tag": "v1.2.3",    "tags": ["v1.2.3", "v1.2.2", "v1.2.1", "v1.2.0"],    "suggestions": {        "patch": "v1.2.4",        "minor": "v1.3.0",        "major": "v2.0.0"    }}
4. POST /api/init.php?e=merge
Body :
{    "repo": "API",    "branch": "feature/new-auth"}
Action : Merge la branche dans main/master via GitHub API
Retourne :
{    "success": true,    "message": "Branch feature/new-auth merged into main",    "sha": "abc123..."}
5. POST /api/init.php?e=release
Body :
{    "repo": "API",    "tag": "v1.2.4",    "title": "Version 1.2.4",    "description": "- Fix bug authentification\n- Nouvelle feature X",    "prerelease": false}
Action : CrÃ©e un tag + release sur GitHub
Retourne :
{    "success": true,    "release_url": "https://github.com/owner/API/releases/tag/v1.2.4"}
Interface Utilisateur
Layout
Sidebar : Logo + navigation (juste "Release Manager" pour l'instant)
Main : Formulaire en Ã©tapes verticales
Formulaire (une seule page, Ã©tapes visibles)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  ðŸš€ Release Manager                                             â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚                                                                 â”‚â”‚  Ã‰TAPE 1 - SÃ©lectionner le repo                                â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚  â”‚ â–¼  API                                                  â”‚   â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚                                                                 â”‚â”‚  Ã‰TAPE 2 - SÃ©lectionner la branche Ã  merger                    â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚  â”‚ â–¼  feature/new-auth                                     â”‚   â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚  â„¹ï¸ Cette branche sera mergÃ©e dans: main                        â”‚â”‚                                                                 â”‚â”‚  Ã‰TAPE 3 - Choisir le tag                                      â”‚â”‚  Dernier tag: v1.2.3                                           â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚  â”‚ â—‹ v1.2.4 (patch)                                        â”‚   â”‚â”‚  â”‚ â—‹ v1.3.0 (minor)                                        â”‚   â”‚â”‚  â”‚ â—‹ v2.0.0 (major)                                        â”‚   â”‚â”‚  â”‚ â—‹ Custom: [_______________]                             â”‚   â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚                                                                 â”‚â”‚  Ã‰TAPE 4 - Description de la release                           â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚  â”‚ ## NouveautÃ©s                                           â”‚   â”‚â”‚  â”‚ - Fix bug authentification                              â”‚   â”‚â”‚  â”‚ - Nouvelle feature X                                    â”‚   â”‚â”‚  â”‚                                                         â”‚   â”‚â”‚  â”‚ ## Corrections                                          â”‚   â”‚â”‚  â”‚ - AmÃ©lioration performances                             â”‚   â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚  â„¹ï¸ Markdown supportÃ©                                           â”‚â”‚                                                                 â”‚â”‚  â˜ Pre-release                                                  â”‚â”‚                                                                 â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚  â”‚              ðŸš€ CRÃ‰ER LA RELEASE                        â”‚   â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚                                                                 â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Comportement dynamique
Au chargement : Charger la liste des repos
Quand repo sÃ©lectionnÃ© : Charger les branches + tags de ce repo
Quand branche sÃ©lectionnÃ©e : Afficher infos de la branche (dernier commit, auteur)
Bouton "CrÃ©er" :
Afficher loader
Appeler merge API
Si OK, appeler release API
Afficher succÃ¨s avec lien vers la release GitHub
Ou afficher erreur
Ã‰tats d'erreur Ã  gÃ©rer
Token GitHub invalide
Repo non trouvÃ©
Branche dÃ©jÃ  mergÃ©e
Conflits de merge
Tag dÃ©jÃ  existant
Rate limit GitHub API
GitHub API - Appels nÃ©cessaires
Classe PHP helper (api/github.php)
class GitHub {    private static function request($method, $endpoint, $data = null) {        $ch = curl_init();        curl_setopt($ch, CURLOPT_URL, 'https://api.github.com' . $endpoint);        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);        curl_setopt($ch, CURLOPT_HTTPHEADER, [            'Authorization: Bearer ' . GITHUB_TOKEN,            'Accept: application/vnd.github.v3+json',            'User-Agent: ReleaseManager'        ]);                if ($method === 'POST') {            curl_setopt($ch, CURLOPT_POST, true);            curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));        }                $response = curl_exec($ch);        curl_close($ch);                return json_decode($response, true);    }        // Lister les branches    public static function getBranches($repo) {        return self::request('GET', '/repos/' . GITHUB_OWNER . '/' . $repo . '/branches');    }        // Lister les tags    public static function getTags($repo) {        return self::request('GET', '/repos/' . GITHUB_OWNER . '/' . $repo . '/tags');    }        // Merger une branche    public static function merge($repo, $branch, $base = 'main') {        return self::request('POST', '/repos/' . GITHUB_OWNER . '/' . $repo . '/merges', [            'base' => $base,            'head' => $branch,            'commit_message' => 'Merge ' . $branch . ' into ' . $base        ]);    }        // CrÃ©er une release    public static function createRelease($repo, $tag, $title, $description, $prerelease = false) {        return self::request('POST', '/repos/' . GITHUB_OWNER . '/' . $repo . '/releases', [            'tag_name' => $tag,            'name' => $title,            'body' => $description,            'prerelease' => $prerelease        ]);    }}
Style CSS (thÃ¨me sombre, moderne)
Background : #0d1117 (GitHub dark)
Cards : #161b22 avec border #30363d
Accent : #238636 (vert GitHub)
Text : #c9d1d9
Inputs : Style GitHub dark
Bouton principal : Vert avec hover
Ã‰tapes de dÃ©veloppement
âœ… CrÃ©er la structure de fichiers
âœ… Configurer config.php avec token GitHub
âœ… CrÃ©er la classe GitHub helper
âœ… CrÃ©er les endpoints API (repos, branches, tags, merge, release)
âœ… CrÃ©er l'interface utilisateur
âœ… Connecter le frontend aux APIs
âœ… GÃ©rer les erreurs et feedback utilisateur
âœ… Tester avec un vrai repo
Token GitHub requis
CrÃ©er un Personal Access Token sur GitHub avec les permissions :
repo (accÃ¨s complet aux repos privÃ©s)
write:packages (optionnel, si besoin)
URL : https://github.com/settings/tokens/new